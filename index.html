<!DOCTYPE html>
<html lang="en">
<head>
    <title>ARIS Rocket</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            margin: 0px;
            background-color: #000000;
            overflow: hidden;
        }
    </style>
</head>
<body>

    <script src="./three.js"></script>

    <script>
        var camera, scene, renderer;
        var rocket;
        var full;

        var line;

        var bgcol = 0x121214;

        init();
        animate();
        function init() {

            camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 100000 );

            camera.position.set(0,8,15);
            //camera.position.z=1000;
            camera.rotation.set(-0.3,0,0);

            scene = new THREE.Scene();

            var light = new THREE.DirectionalLight({
                color: 0xffffff,
            });
            light.position.set(2,5,3);
            scene.add(light);

            rocket = new THREE.Group();
            rocket.rotation.y = 1.3;
            rocket.scale.y = -1;
            rocket.quaternion.set(-0.7, 0, -0.7, 0);
            scene.add(rocket);

            renderer = new THREE.WebGLRenderer({antialias: true});
            renderer.setPixelRatio( window.devicePixelRatio );
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.setClearColor( bgcol );
            document.body.appendChild( renderer.domElement );


            // var linegeo = new THREE.Geometry();
            // linegeo.vertices.push(
            // );
            // var line_material = new THREE.LineBasicMaterial({
            //     color: 0xffffff
            // });
            // line = new THREE.Line( linegeo, line_material );
            // line.scale.y = 0.06;
            // line.rotation.x = -Math.PI/2;

            // scene.add( line );
            //renderer.render( scene, camera );


            var bgmat = new THREE.MeshBasicMaterial({color: bgcol});
            var outlinemat = new THREE.MeshBasicMaterial({
                    color: 0xffffff,
                    side: THREE.BackSide
                });

            var loader = new THREE.JSONLoader();

            loader.load('models/fins.json', geometry => {
                var fins = new THREE.Mesh(geometry, bgmat);
                rocket.add(fins);

                renderer.render( scene, camera );
            });

            loader.load('models/finsoutline.json', geometry => {
                var finsoutline = new THREE.Mesh(geometry, outlinemat);
                rocket.add(finsoutline);
            });

            loader.load('models/body.json', geometry => {
                var body = new THREE.Mesh(geometry, bgmat);
                rocket.add(body);
            });

            loader.load('models/bodyoutline.json', geometry => {
                var bodyoutline = new THREE.Mesh(geometry, outlinemat);
                rocket.add(bodyoutline);
            });

            loader.load('models/exhaust.json', geometry => {
                var exhaust = new THREE.Mesh(geometry, bgmat);
                rocket.add(exhaust);
            });

            loader.load('models/exhaustoutline.json', geometry => {
                var exhaustoutline = new THREE.Mesh(geometry, outlinemat);
                rocket.add(exhaustoutline);
            });

            // loader.load('models/full.json', (geometry, material) => {
            //     full = new THREE.Mesh(geometry, material);
            //     scene.add(full);
            // });


            //
            window.addEventListener( 'resize', onWindowResize, false );
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize( window.innerWidth, window.innerHeight );
        }
        function animate() {
            requestAnimationFrame( animate );

            //line.rotation.z += 0.01

            //rocket.rotation.y += 0.015;
            //full.rotation.y += 0.015;
            // line.rotation.y += 0.01;
            renderer.render( scene, camera );
        }
    </script>

</body>
</html>